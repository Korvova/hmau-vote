# ðŸ³ Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· Docker

Ð­Ñ‚Ð¾ ÑÐ°Ð¼Ñ‹Ð¹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ.

---

## ðŸ“‹ Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾

1. **Docker Desktop** - ÑÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ https://www.docker.com/products/docker-desktop/
2. **Git** - Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ¾Ð´Ð°
3. **Windows 10/11** - Ñ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ð¾Ð¹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹

---

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ (3 ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹)

### Ð¨Ð°Ð³ 1: ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ Ð¸Ð· Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

```powershell
cd C:\Users\Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€\Documents\App\hmau-vote
git pull origin main
```

### Ð¨Ð°Ð³ 2: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹

```powershell
docker-compose up -d
```

Ð­Ñ‚Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°:
- Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ PostgreSQL Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…
- Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð²ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ð¾Ð±Ð»Ð°ÐºÐ°
- Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ API ÑÐµÑ€Ð²ÐµÑ€
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ Nginx Ð´Ð»Ñ Ñ€Ð°Ð·Ð´Ð°Ñ‡Ð¸ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°

### Ð¨Ð°Ð³ 3: ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÑÐ°Ð¹Ñ‚

ÐžÑ‚ÐºÑ€Ð¾Ð¹ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð¸ Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸ Ð½Ð°:
```
http://localhost/hmau-vote/
```

---

## ðŸ”§ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° CoCon Connector

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° Docker, Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ CoCon Connector:

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹ CoCon Connector
2. **Site API base**: `http://localhost/api`
3. **Socket base**: `http://localhost`
4. **CoCon base**: `http://10.0.20.32:8890/CoCon` (Ð½Ðµ Ð¼ÐµÐ½ÑÐ¹)

---

## ðŸ“Š Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ð¼Ð¸

### ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
```powershell
docker-compose logs -f app
```

### ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
```powershell
docker-compose restart
```

### ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
```powershell
docker-compose down
```

### ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¿ÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ° (ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð¾ÑÑŒ Ð² ÐºÐ¾Ð´Ðµ)
```powershell
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

---

## ðŸ—„ï¸ Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð±Ð°Ð·Ð¾Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº PostgreSQL
```powershell
docker exec -it voting-db psql -U votingapp -d voting
```

### Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```powershell
docker exec voting-db pg_dump -U votingapp voting > backup.sql
```

### Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```powershell
docker exec -i voting-db psql -U votingapp voting < backup.sql
```

---

## ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

ÐšÐ¾Ð³Ð´Ð° Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ Ð½Ð¾Ð²Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ:

```powershell
cd C:\Users\Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€\Documents\App\hmau-vote
git pull origin main
docker-compose down
docker-compose build
docker-compose up -d
```

---

## ðŸ†˜ Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Docker Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð£Ð±ÐµÐ´Ð¸ÑÑŒ Ñ‡Ñ‚Ð¾:
1. Docker Desktop Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ (Ð¸ÐºÐ¾Ð½ÐºÐ° Ð² Ñ‚Ñ€ÐµÐµ)
2. Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð° Ð² BIOS
3. WSL 2 ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ (Docker Desktop Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ)

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐŸÐ¾Ñ€Ñ‚ 80 Ð·Ð°Ð½ÑÑ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð˜Ð·Ð¼ÐµÐ½Ð¸ Ð¿Ð¾Ñ€Ñ‚ Ð² `docker-compose.yml`:
```yaml
nginx:
  ports:
    - "8080:80"  # Ð’Ð¼ÐµÑÑ‚Ð¾ "80:80"
```

Ð¢Ð¾Ð³Ð´Ð° ÑÐ°Ð¹Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð° `http://localhost:8080/hmau-vote/`

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½Ðµ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð»Ð°ÑÑŒ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐŸÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹:
```powershell
docker-compose down -v  # Ð£Ð´Ð°Ð»Ð¸Ñ‚ volumes (Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…)
docker-compose up -d    # Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ Ð·Ð°Ð½Ð¾Ð²Ð¾ Ð¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð´Ðµ Ð½Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸ Ð¾Ð±Ñ€Ð°Ð·:
```powershell
docker-compose build --no-cache app
docker-compose up -d
```

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
hmau-vote/
â”œâ”€â”€ docker-compose.yml      # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
â”œâ”€â”€ Dockerfile              # Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
â”œâ”€â”€ nginx.conf              # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€Ð°
â”œâ”€â”€ init-db.sql             # ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð±Ð°Ð·Ñ‹
â”œâ”€â”€ .env.docker.example     # ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
â””â”€â”€ uploads/                # Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ (Ð»Ð¾Ð³Ð¾Ñ‚Ð¸Ð¿Ñ‹ Ð¸ Ñ‚.Ð´.)
```

---

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ:

1. **API Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚**: http://localhost/api/health
2. **Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½**: http://localhost/hmau-vote/
3. **Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…**:
   ```powershell
   docker exec voting-db psql -U votingapp -d voting -c "SELECT COUNT(*) FROM \"User\";"
   ```
4. **Ð›Ð¾Ð³Ð¸ Ð±ÐµÐ· Ð¾ÑˆÐ¸Ð±Ð¾Ðº**:
   ```powershell
   docker-compose logs app
   ```

---

## ðŸŽ¯ Ð§Ñ‚Ð¾ Ð´Ð°Ð»ÑŒÑˆÐµ?

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°:
1. Ð’Ð¾Ð¹Ð´Ð¸ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¼ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð¾Ð¼
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐ¾Ð±Ñ€Ð°Ð½Ð¸Ñ Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ
3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ CoCon Connector
4. ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ð½Ð¸Ðµ
5. ÐŸÐ¾Ð¿Ñ€Ð¾ÑÐ¸ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚-Ñ„Ð¾Ñ€Ð²Ð°Ñ€Ð´Ð¸Ð½Ð³ Ð´Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð¸Ð·Ð²Ð½Ðµ

---

## ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚Ñ‹

- Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÑ‚ÑÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÐŸÐš
- Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð² Docker volumes (Ð½Ðµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑŽÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐµ)
- ÐŸÐ°Ð¿ÐºÐ° `uploads/` Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð¸Ð· Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° (Ð»Ð¾Ð³Ð¾Ñ‚Ð¸Ð¿Ñ‹ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹ Ð±ÐµÐ· Ð¿ÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ¸)
- Ð›Ð¾Ð³Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹ Ñ‡ÐµÑ€ÐµÐ· `docker-compose logs`

---

**ÐÑƒÐ¶Ð½Ð° Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ?** Ð¡Ð¾Ð·Ð´Ð°Ð¹ issue Ð½Ð° GitHub Ð¸Ð»Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ð² Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ.
